{% extends "base.html" %}

{% load static %}
{% load crispy_forms_tags %}
{% block title %}Tablero rápido{% endblock %}

{% block content %}
    {% block javascript %}
    	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="{% static 'js/project.js' %}"></script>
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript">
            google.load("visualization", "1", {packages:["corechart"]});
        </script>
    {% endblock %}

    <div id="wrapper">
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <p>Total medidores: {{ data.usuario_medidores|length }}</p>
                </li>
                {% if data.medidor %}
                	<li>
                		<p>Medidor Padre: {{ data.medidor }}</p>
                	</li>
                	<li>
						<p>Medidores Relacionados: </p>
						<hr>
					</li>
				{% else %}
					<li>
						<p>Medidores Padres</p>
						<hr>
					</li>
                {% endif %}
				{% for medidor in data.medidores_filtered %}
					<li>
						<a href="/tablero_rapido/?medidor={{ medidor }}">{{ medidor }}</a>
	                </li>
	            {% endfor %}
                
            </ul>
        </div>

        <div id="page-content-wrapper" class="show_data">
            <div class="container-fluid">

                <div class="row">
                    {% if messages %}
                        {% for message in messages %}
                            <div class="alert {% if message.tags %}alert-{{ message.tags }}{% endif %}">{{ message }}</div>
                        {% endfor %}
                    {% endif %}
                </div>

                <div class="row">
                    <div class="col-lg-12">
                        <h1 class="page-header">
                            Hidromed S.A. <small>Tablero rápido</small>
                        </h1>
                    </div>
                </div>
				
				{% if data.graficos.data_todos_medidores %}
	                <div class="row">

	                	<div class="col-lg-3 col-md-6">
	                        <div class="panel panel-primary panel-principal">

	                            <div class="panel-heading">
	                                <div class="row">
	                                    <div class="col-xs-12 text-right">
	                                        <div class="huge">{{ data.data_interes.consumo_total_seis_meses }}</div>
	                                        <div>Consumo</div>
	                                    </div>
	                                </div>
	                            </div>

                                <div class="panel-footer">
                                    <span class="pull-left">Últimos 6 meses</span>
                                    <div class="clearfix"></div>
                                </div>

	                        </div>
	                    </div>

	                    <div class="col-lg-3 col-md-6">
	                        <div class="panel panel-green">

	                            <div class="panel-heading">
	                                <div class="row">
	                                    <div class="col-xs-12 text-right">
	                                        <div class="huge">{{ data.data_interes.promedio_consumo_mensual }}</div>
	                                        <div>Promedio consumo mensual</div>
	                                    </div>
	                                </div>
	                            </div>

                                <div class="panel-footer">
                                    <span class="pull-left">Útimos 6 meses</span>
                                    <div class="clearfix"></div>
                                </div>

	                        </div>
	                    </div>

	                    <div class="col-lg-3 col-md-6">
	                        <div class="panel panel-yellow">

	                            <div class="panel-heading">
	                                <div class="row">
	                                    <div class="col-xs-12 text-right">
	                                        <div class="huge">{{ data.data_interes.consumo_mes_actual }}</div>
	                                        <div>Consumo</div>
	                                    </div>
	                                </div>
	                            </div>

                                <div class="panel-footer">
                                    <span class="pull-left">Mes actual</span>
                                    <div class="clearfix"></div>
                                </div>
	                            
	                        </div>
	                    </div>

	                    <div class="col-lg-3 col-md-6">
	                        <div class="panel panel-ciel">

	                            <div class="panel-heading">
	                                <div class="row">
	                                    <div class="col-xs-12 text-right">
	                                        <div class="huge">{{ data.data_interes.promedio_consumo_diario }}</div>
	                                        <div>Promedio consumo diario</div>
	                                    </div>
	                                </div>
	                            </div>
	                            
                                <div class="panel-footer">
                                    <span class="pull-left">Mes actual</span>
                                    <div class="clearfix"></div>
                                </div>
	                            
	                        </div>
	                    </div>

	                    <div class="col-lg-3 col-md-6">
	                        <div class="panel panel-red">

	                            <div class="panel-heading">
	                                <div class="row">
	                                    <div class="col-xs-12 text-right">
	                                        <div>
	                                        	<img src="{% static 'images/zumbido.svg' %}" alt="Zumbido">
	                                        </div>
	                                        <div>Alarmas!</div>
	                                    </div>
	                                </div>
	                            </div>

	                            <a href="#">
	                                <div class="panel-footer">
	                                    <span class="pull-left">Ver detalle de alarmas</span>
	                                    <div class="clearfix"></div>
	                                </div>
	                            </a>
	                        </div>
	                    </div>

	                </div>
	                    
	                <div class="row">
	                    <div class="col-lg-12">
	                        <div  class="row">
	                            {{ data.graficos.data_todos_medidores.as_html }}
	                        </div>
	                        <div  class="row">
	                            {{ data.graficos.data_por_medidor.as_html }}
	                        </div>
	                        <div  class="row">
	                            {{ data.graficos.data_cirular.as_html }}
	                        </div>
	                    </div>    
	                </div>

                {% else %}
                    <div class="col-lg-12 no_data">
                        <img src="{% static 'images/advertencia.svg' %}" alt="Advertencia">
                        <h2>NO SE ENCONTRARON GRÁFICOS</h2>
                    </div>
                {% endif %}

            </div>
        </div>
    </div>
{% endblock %}